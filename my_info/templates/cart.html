
{% extends 'base.html' %}

{% load static %}

{% block title %}장바구니{% endblock %}
<link rel="stylesheet" href="{% static 'web_app/assets/css/styles.css' %}">

{% block content %}
<div class="book-container">
  <div class="book-description">
<br><br><br>
<body>
    <section class="cart">
        <div class="cart__information">
            <ul>
                <li>장바구니 상품은 최대 30일간 저장됩니다.</li>
                <li>가격, 옵션 등 정보가 변경된 경우 주문이 불가할 수 있습니다.</li>
                <li>상품은 판매자 설정 시점에 따라 오늘출발 여부가 변경될 수 있으니 주문 시 꼭 다시 확인해 주시기 바랍니다.</li>
            </ul>
        </div>
        <table class="cart__list">
            <form>
                <thead>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td colspan="2">상품정보</td>
                        <td>옵션</td>
                        <td>상품금액</td>
                        <td>배송비</td>
                    </tr>
                </thead>
                <tbody>
                    <tr class="cart__list__detail">
    <td><input type="checkbox"></td>
    <td><img src="4_ai1.jpeg" alt="책사진"></td>
    <td><a href="#">항공과</a><span class="cart__list__smartstore"> </span>
        <p>항공서비스 실무중국어</p>
        <span class="price">17,000</span>
        <span style="text-decoration: line-through; color: lightgray;">119,000</span>
    </td>
    
   
<td class="cart__list__option">
        <!-- Quantity input field -->
        <p>상품 주문 수량: <input type="number" min="1" value="1" class="quantity-input" data-original-quantity="1">개</p>
        {% comment %} <button class="cart__list__optionbtn">주문조건 추가/변경</button> {% endcomment %}
        <button class="cart__list__optionbtn" id="reset-quantity">수량 초기화</button>
    </td>
    <td><span class="price" >17,000원</span><br>
        <button class="cart__list__orderbtn">주문하기</button>
    </td>
    <td>무료</td>
</tr>
                    <tr class="cart__list__detail">
                        <td style="width: 2%;"><input type="checkbox"></td>
                        <td style="width: 13%;">
                            <img src="web_app/cart_image.png" alt="책사진">
                        </td>
                        <td style="width: 27%;"><a href="#">외식산업과</a><span class="cart__list__smartstore"> 스마트스토어</span>
                            <p>책정보</p>
                            <span class=" price">88,900원</span>
                        </td>
                        <td class="cart__list__option" style="width: 27%;">
                           
                           <p>상품 주문 수량: <input type="number" min="1" value="1" class="quantity-input" data-original-quantity="1">개</p>
                           <button class="cart__list__optionbtn" id="reset-quantity">수량 초기화</button>
                        </td>
                        <td style="width: 15%;"><span class="price">88,900원</span><br>
                            <button class="cart__list__orderbtn">주문하기</button>
                        </td>
                        <td style="width: 15%;">무료</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><input type="checkbox"> <button class="cart__list__optionbtn delete-selected-items">선택상품 삭제</button>
                            <button class="cart__list__optionbtn">선택상품 찜</button>
                        </td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tfoot>
            </form>
        </table>
        <div class="cart__mainbtns">
          <a href="{% url 'home' %}">
            <button class="cart__bigorderbtn left">쇼핑 계속하기</button>
          </a>
            <button class="cart__bigorderbtn right">주문하기</button>
        </div>
    </section>
<script>
        // Get all quantity input elements
        const quantityInputs = document.querySelectorAll('.quantity-input');
    
        // Add event listeners to handle quantity changes
        quantityInputs.forEach(input => {
            input.addEventListener('change', function () {
                // Get the new quantity value
                const newQuantity = parseInt(this.value, 10);
    
                // Find the corresponding item price element
                const itemPriceElement = this.closest('.cart__list__detail').querySelector('.price');
    
                // Parse the current item price as an integer (assuming it's in the format "xx,xxx원")
                const currentPrice = parseInt(itemPriceElement.textContent.replace(/[^0-9]/g, ''), 10);
    
                // Calculate the new item price based on the quantity
                const newPrice = newQuantity * currentPrice;
    
                // Update the item price element with the new price formatted as "xx,xxx원"
                itemPriceElement.textContent = newPrice.toLocaleString() + '원';
                
            });
        });
    </script>

    <script>
// Get the "수량 초기화" 버튼 element
const resetQuantityButton = document.getElementById('reset-quantity');

// Add an event listener to handle the click event
resetQuantityButton.addEventListener('click', function () {
    // Get the quantity input elements
    const quantityInputs = document.querySelectorAll('.quantity-input');

    // Loop through each quantity input and set its value to 1
    quantityInputs.forEach(input => {
        input.value = 1;

        // Trigger the 'change' event on each input to update the price
        input.dispatchEvent(new Event('change'));
    });

    // Get the price elements
    const priceElements = document.querySelectorAll('.cart__list__detail .price');

    // Loop through each price element and set it to the initial price
    priceElements.forEach(priceElement => {
        const initialPrice = parseInt(priceElement.getAttribute('data-original-price'), 10);
        priceElement.textContent = initialPrice.toLocaleString() + '원';
    });
});

    </script>
    <script>
    </script>
</body>



{% endblock %}